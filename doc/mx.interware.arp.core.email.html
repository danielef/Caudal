<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>mx.interware.arp.core.email documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Arp 1.1.0 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>mx</span></div></div></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>interware</span></div></div></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>arp</span></div></div></li><li class="depth-4"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></div></li><li class="depth-5 branch"><a href="mx.interware.arp.core.atom-state.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>atom-state</span></div></a></li><li class="depth-5 branch current"><a href="mx.interware.arp.core.email.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>email</span></div></a></li><li class="depth-5 branch"><a href="mx.interware.arp.core.folds.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>folds</span></div></a></li><li class="depth-5 branch"><a href="mx.interware.arp.core.global.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>global</span></div></a></li><li class="depth-5 branch"><a href="mx.interware.arp.core.immutant-avout.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>immutant-avout</span></div></a></li><li class="depth-5 branch"><a href="mx.interware.arp.core.immutant-state.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>immutant-state</span></div></a></li><li class="depth-5 branch"><a href="mx.interware.arp.core.listener.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>listener</span></div></a></li><li class="depth-5 branch"><a href="mx.interware.arp.core.main.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>main</span></div></a></li><li class="depth-5 branch"><a href="mx.interware.arp.core.parsers.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>parsers</span></div></a></li><li class="depth-5 branch"><a href="mx.interware.arp.core.repl.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>repl</span></div></a></li><li class="depth-5 branch"><a href="mx.interware.arp.core.scheduler-server.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>scheduler-server</span></div></a></li><li class="depth-5 branch"><a href="mx.interware.arp.core.starter.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>starter</span></div></a></li><li class="depth-5"><a href="mx.interware.arp.core.state.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>state</span></div></a></li><li class="depth-4"><div class="no-link"><div class="inner"><span class="tree" style="top: -424px;"><span class="top" style="height: 433px;"></span><span class="bottom"></span></span><span>io</span></div></div></li><li class="depth-5 branch"><a href="mx.interware.arp.io.client.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>client</span></div></a></li><li class="depth-5 branch"><a href="mx.interware.arp.io.elastic.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>elastic</span></div></a></li><li class="depth-5 branch"><a href="mx.interware.arp.io.kafka.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>kafka</span></div></a></li><li class="depth-5 branch"><a href="mx.interware.arp.io.log-feed-simulator.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>log-feed-simulator</span></div></a></li><li class="depth-5 branch"><a href="mx.interware.arp.io.log4j-server.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>log4j-server</span></div></a></li><li class="depth-5 branch"><a href="mx.interware.arp.io.server.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>server</span></div></a></li><li class="depth-5 branch"><a href="mx.interware.arp.io.syslog-server.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>syslog-server</span></div></a></li><li class="depth-5 branch"><a href="mx.interware.arp.io.tailer-server.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>tailer-server</span></div></a></li><li class="depth-5"><a href="mx.interware.arp.io.tcp-server.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>tcp-server</span></div></a></li><li class="depth-4"><div class="no-link"><div class="inner"><span class="tree" style="top: -300px;"><span class="top" style="height: 309px;"></span><span class="bottom"></span></span><span>streams</span></div></div></li><li class="depth-5 branch"><a href="mx.interware.arp.streams.common.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>common</span></div></a></li><li class="depth-5 branch"><a href="mx.interware.arp.streams.stateful.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>stateful</span></div></a></li><li class="depth-5"><a href="mx.interware.arp.streams.stateless.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>stateless</span></div></a></li><li class="depth-4"><div class="no-link"><div class="inner"><span class="tree" style="top: -114px;"><span class="top" style="height: 123px;"></span><span class="bottom"></span></span><span>test</span></div></div></li><li class="depth-5 branch"><a href="mx.interware.arp.test.simple-config.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>simple-config</span></div></a></li><li class="depth-5 branch"><a href="mx.interware.arp.test.simple-parser.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>simple-parser</span></div></a></li><li class="depth-5"><a href="mx.interware.arp.test.testers.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>testers</span></div></a></li><li class="depth-4"><div class="no-link"><div class="inner"><span class="tree" style="top: -114px;"><span class="top" style="height: 123px;"></span><span class="bottom"></span></span><span>util</span></div></div></li><li class="depth-5 branch"><a href="mx.interware.arp.util.arp-util.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>arp-util</span></div></a></li><li class="depth-5 branch"><a href="mx.interware.arp.util.date-util.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>date-util</span></div></a></li><li class="depth-5 branch"><a href="mx.interware.arp.util.id-util.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>id-util</span></div></a></li><li class="depth-5 branch"><a href="mx.interware.arp.util.matrix.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>matrix</span></div></a></li><li class="depth-5 branch"><a href="mx.interware.arp.util.ns-util.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>ns-util</span></div></a></li><li class="depth-5"><a href="mx.interware.arp.util.rest-util.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>rest-util</span></div></a></li></ul></div><div class="sidebar" id="vars"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="mx.interware.arp.core.email.html#var-email-event"><div class="inner"><span>email-event</span></div></a></li><li class="depth-1"><a href="mx.interware.arp.core.email.html#var-event-.3Ehtml"><div class="inner"><span>event-&gt;html</span></div></a></li><li class="depth-1"><a href="mx.interware.arp.core.email.html#var-mailer"><div class="inner"><span>mailer</span></div></a></li><li class="depth-1"><a href="mx.interware.arp.core.email.html#var-make-footer"><div class="inner"><span>make-footer</span></div></a></li><li class="depth-1"><a href="mx.interware.arp.core.email.html#var-make-header"><div class="inner"><span>make-header</span></div></a></li><li class="depth-1"><a href="mx.interware.arp.core.email.html#var-make-table-template"><div class="inner"><span>make-table-template</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h2 class="anchor" id="top">mx.interware.arp.core.email</h2><div class="doc"><div class="markdown"></div></div><div class="public anchor" id="var-email-event"><h3>email-event</h3><div class="usage"><code>(email-event smtp-opts msg-opts events &amp; [keys html-template])</code></div><div class="doc"><div class="markdown"><p>Sends an event or a sequence of events via email</p>
<ul>
  <li><em>smtp-opts</em> SMTP options passed to Postal to send the email</li>
  <li><em>msg-opts</em> Message options passed to Postal to send the email. Value of :body is replaced with HTML produced by make-header, event-&gt;html and make-footer</li>
  <li><em>events</em> to be sended</li>
  <li>keys (optional) keys to be sended</li>
  <li>html-template (optional) to produce a representation of an event</li>
</ul></div></div></div><div class="public anchor" id="var-event-.3Ehtml"><h3>event-&gt;html</h3><div class="usage"><code>(event-&gt;html arp-event &amp; [html-template])</code></div><div class="doc"><div class="markdown"><p>Produces a HTML representation of an event</p>
<ul>
  <li><em>arp-event</em> to be represented in HTML</li>
  <li>html-template (optional) to produce a representation of an event. This template uses vectors to represent elements and is parsed using Hiccup and replaces arp-event key ocurrences into vectors with its value</li>
</ul></div></div></div><div class="public anchor" id="var-mailer"><h3>mailer</h3><div class="usage"><code>(mailer)</code><code>(mailer opts)</code><code>(mailer smtp-opts msg-opts)</code></div><div class="doc"><div class="markdown"><p>Returns a mailer, which is a function invoked with a map of options and returns a stream that takes a single or a sequence of events, and sends an email about them.</p><p>Examples:</p>
<pre><code>;; Mailer that uses a local sendmail
(def email (mailer))

;; Mailer with mixed Postal options  
(def email (mailer {:host &#39;smtp.gmail.com&#39; 
                    :user &#39;sample@gmail.com&#39;
                    :pass &#39;somesecret&#39;
                    :subject &#39;Help!!&#39;
                    :to [&#39;ops@example.com&#39; &#39;support@example.com&#39;]
                    :ssl :yes}))

;; Invoking email sending only :message and :ts fields
(email event [:message :ts])

;; Invoking email sending only :message and :ts fields into a custom template
(email event [:message :ts] [:p [:em :message] &#39; since &#39; [:i :ts]])
</code></pre></div></div></div><div class="public anchor" id="var-make-footer"><h3>make-footer</h3><div class="usage"><code>(make-footer)</code></div><div class="doc"><div class="markdown"><p>Creates a default footer with a simple text</p></div></div></div><div class="public anchor" id="var-make-header"><h3>make-header</h3><div class="usage"><code>(make-header title)</code></div><div class="doc"><div class="markdown"><p>Creates a default header with a simple title</p>
<ul>
  <li><em>title</em> replaced in mail header</li>
</ul></div></div></div><div class="public anchor" id="var-make-table-template"><h3>make-table-template</h3><div class="usage"><code>(make-table-template source)</code></div><div class="doc"><div class="markdown"><p>Creates a default html view from an arbitrary source map</p>
<ul>
  <li><em>source</em> arbitrary map to build a template</li>
</ul></div></div></div></div></body></html>